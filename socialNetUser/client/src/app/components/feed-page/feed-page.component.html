<section class="page" *ngIf="activeUser; else noUser">
  <header class="page-header">
    <div>
      <p class="eyebrow">–ì–ª–∞–≤–Ω–∞—è –ª–µ–Ω—Ç–∞</p>
      <h1>–ü—Ä–∏–≤–µ—Ç, {{ activeUser.name }} üëã</h1>
    </div>
  </header>

  <nav class="tab-nav" aria-label="–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–∫–ª–∞–¥–∫–∏">
    <button type="button" (click)="setTab('news')" [class.active]="activeTab === 'news'">
      –ù–æ–≤–æ—Å—Ç–∏
    </button>
    <button type="button" (click)="setTab('friends')" [class.active]="activeTab === 'friends'">
      –î—Ä—É–∑—å—è
    </button>
    <button type="button" (click)="setTab('messages')" [class.active]="activeTab === 'messages'">
      –°–æ–æ–±—â–µ–Ω–∏—è
    </button>
  </nav>

  <div class="tab-container" [ngSwitch]="activeTab">
    <div *ngSwitchCase="'news'" class="tab-panel">
      <app-post-feed
        class="primary"
        [posts]="posts"
        [authorMap]="authorMap"
        [loading]="loadingFeed"
        (refresh)="refreshFeed()"
      ></app-post-feed>
    </div>

    <div *ngSwitchCase="'friends'" class="tab-panel">
      <app-friends-panel
        [currentUser]="activeUser"
        [allUsers]="allUsers"
        [userMap]="authorMap"
        [loading]="loadingFriends"
        (addFriend)="onAddFriend($event)"
        (removeFriend)="onRemoveFriend($event)"
      ></app-friends-panel>
    </div>

    <div *ngSwitchCase="'messages'" class="tab-panel">
      <app-message-center
        [currentUser]="activeUser"
        [friendUsers]="friendUsers"
        [messages]="messages"
        [peerId]="peerId"
        [loading]="loadingMessages"
        (peerChange)="onPeerChange($event)"
        (sendMessage)="onSendMessage($event)"
      ></app-message-center>
    </div>
  </div>
</section>

<ng-template #noUser>
  <section class="empty card">
    <h2>–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å –ª–µ–Ω—Ç—É</h2>
    <a routerLink="/login">–ü–µ—Ä–µ–π—Ç–∏ –∫ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏</a>
  </section>
</ng-template>
